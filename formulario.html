<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <link rel="stylesheet" href="./formulario.css">

    </head>
    <body>
        <header>
            <nav>
                <ul class="menu">
                    <li>
                        <a href="./index.html">Inicio</a>
                    </li>
                    <li>
                        <a href="./jazz.html">Jazz</a>
                    </li>
                    <li>
                        <a href="./formulario.html">Promociona tu acamedia</a>
                    </li>
                </ul>
            </nav>
        </header>

        <div>
            <p></p>
        </div>

        <div class="formuArea">
            <form
                class="formulario" name="formulario" autocomplete="on" method="POST">
                <!--agregar el siguiente atributo action="validar.js" -->
                <label for="nombre">Nombre:</label>
                <input id="nombre" type="text" name="nombre" placeholder="Ingrese su nombre completo" required autofocus><br>
                <label for="correo">Correo electronico:</label>
                <input id="correo" type="email" name="correo" placeholder="Ingrese su correo electronico" required autofocus><br>
                <label for="mensaje">Escriba su mensaje</label><br>
                <textarea id="mensaje" type="text" name="mensaje" id="mensaje"></textarea><br><br>
                <label for="nrotel">Telefono:</label>
                <input id="telefono" type="tel" name="telefono" placeholder="Ingrese su nro de telefono" required autofocus><br>

                <input
                type="submit" id="btEnviar" value="Enviar" onclick="validar(event)">
            <!-- ver opcion <form onsubmit="return validar()"></form> -->
            </form>
        </div>

        <div class="datosRecibidos">
            <h2>La informacion ingresada es:</h2>

        </div>
        <ul id="listaError"></ul>
        <ol id="listaOk"></ol>

        <script>
            function validar(evento) {
                evento.preventDefault()

                let sinError = true;
                let listaError = document.getElementById("listaError");
                let listaOk = document.getElementById("listaOk");
                listaError.innerHTML = "";
                let nombre = document.querySelector("#nombre");
                let email = document.querySelector("#correo");
                let mensaje = document.querySelector("#mensaje");
                let nrotel = document.querySelector("#telefono");
                
                nombre.classList.remove("error");
                email.classList.remove("error");
                mensaje.classList.remove("error");
                nrotel.classList.remove("error");

                // validando campo nombre
                
                if (! nombre.value || nombre.value.length < 4) {
                    console.log("Nombre invalido")
                    let item = document.createElement("li")
                    listaError.appendChild(item);
                    item.innerHTML = "Nombre invalido";
                    email.classList.add("error");
                    sinError = false;
                }

                // validando campo email

                const validarEmail = (email) => {
                    return String(email.value).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);
                };
                if (email.value.length < 4 || ! validarEmail(email)) {
                    console.log("Debe ingresar un correo válido");
                    let item = document.createElement("li")
                    listaError.appendChild(item);
                    item.innerHTML = "Debe ingresar un correo válido";
                    email.classList.add("error");
                    sinError = false;

                }


                if (mensaje.value.length < 10) {
                    console.log("Debe ingresar un mensaje mas largo");
                    let item = document.createElement("li")
                    listaError.appendChild(item);
                    item.innerHTML = "Debe ingresar un mensaje mas largo (10 caracteres min)";
                    nombre.classList.add("error");
                    sinError = false;

                } else if (mensaje.value.length > 120) {

                    console.log("Debe ingresar un mensaje mas corto");
                    let item = document.createElement("li")
                    listaError.appendChild(item);
                    item.innerHTML = "Debe ingresar un mensaje mas cprto";
                    mensaje.classList.add("error");
                    sinError = false;
                }


                if (nrotel.value.length < 8 || isNaN(parseInt(nrotel.value))) {

                    console.log("Debe ingresar un numero de telefono valido sin 0 ni 15");
                    let item = document.createElement("li")
                    listaError.appendChild(item);
                    item.innerHTML = "Debe ingresar un numero de telefono valido sin 0 ni 15";
                    nrotel.classList.add("error");
                    sinError = false;
                }
                if (sinError) {
                    let item = document.createElement("li")
                    listaOk.appendChild(item);
                    item.innerHTML = nombre.value + " <b>dice</b> " + comentario.value;
                    mensaje.value == "";

                }
                return false;

            }
        </script>
    </body>
</html>
